<Window x:Class="HCI_2024.Views.HomeWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Height="450" Width="800"
        WindowState="Maximized"
        WindowStyle="None"
        ResizeMode="NoResize"
        FontSize="18"
        FontFamily="{DynamicResource MaterialDesignFont}"
        Background="{DynamicResource BackgroundBrush}">

    <materialDesign:DialogHost Identifier="RootDialog">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="3.5*"/>
            </Grid.ColumnDefinitions>

            <!-- Sidebar -->
            <Border Grid.Column="0"
                Background="{DynamicResource PrimaryBrush}"
                ClipToBounds="True">
                <Grid>
                    <StackPanel VerticalAlignment="Stretch" HorizontalAlignment="Stretch">

                        <ItemsControl ItemsSource="{Binding OrderItems}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" Margin="2" Padding="5" Background="{DynamicResource SecondaryBrush}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="40"/>
                                                <ColumnDefinition Width="40"/>
                                            </Grid.ColumnDefinitions>

                                            <!-- Item info -->
                                            <StackPanel Grid.Column="0">
                                                <TextBlock Text="{Binding Name}" FontWeight="Bold" Foreground="{DynamicResource PrimaryBrush}"/>
                                                <TextBlock Text="{Binding Quantity}" Foreground="{DynamicResource PrimaryBrush}"/>
                                                <TextBlock Text="{Binding Price, StringFormat='Price: {0:C}'}" Foreground="{DynamicResource PrimaryBrush}"/>
                                            </StackPanel>

                                            <!-- Delete button -->
                                            <Button Grid.Column="3" ToolTip="{Binding Source={StaticResource Loc}, Path=[Delete]}"
                                                Command="{Binding DataContext.ItemDeleteCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}"
                                                Background="Transparent"
                                                BorderThickness="0">
                                                <materialDesign:PackIcon Kind="Delete" Width="24" Height="24" HorizontalAlignment="Center" Foreground="{DynamicResource PrimaryBrush}"/>
                                            </Button>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        
                    </StackPanel>
                    <StackPanel VerticalAlignment="Bottom" Margin="10">
                        <TextBlock Text="{Binding LocalizedTotalPrice}" FontSize="20" FontWeight="Bold" Margin="0 0 0 10" Foreground="{DynamicResource TextBrush}"/>
                        <Button Content="{Binding Source={StaticResource Loc}, Path=[Checkout]}" 
                                Command="{Binding CheckoutCommand}" 
                                Style="{StaticResource MaterialDesignRaisedButton}" 
                                Background="{DynamicResource SecondaryBrush}" 
                                Foreground="{DynamicResource PrimaryBrush}"/>
                        <Image Source="/Resources/Images/logo.png" Height="100" Margin="0 20 0 0" HorizontalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Main content -->
            <Border Grid.Column="1"
                Background="{DynamicResource BackgroundBrush}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="1">

                <Grid>
                    <!--Options button-->
                    <Button VerticalAlignment="Top"
                            HorizontalAlignment="Left"
                            Width="50"
                            Height="40"
                            Margin="0,0,10,0"
                            Background="Transparent"
                            BorderBrush="Transparent"
                            ToolTip="{Binding Source={StaticResource Loc}, Path=[Options]}"
                            Command="{Binding ShowOptionsCommand}">
                        <materialDesign:PackIcon Kind="Cog" 
                                                 VerticalAlignment="Center" 
                                                 HorizontalAlignment="Center" 
                                                 Foreground="#fca311"/>
                    </Button>

                    <!-- Close button -->
                    <Button Width="40"
                        Height="40"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Right"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        ToolTip="{Binding Source={StaticResource Loc}, Path=[Close]}"
                        Command="{Binding ExitCommand}">
                        <materialDesign:PackIcon Kind="Close"
                                                 VerticalAlignment="Center"
                                                 HorizontalAlignment="Center"
                                                 Foreground="#fca311"/>
                    </Button>

                    <!-- Category buttons -->
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="10">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="10">
                            <Button Content="{Binding Source={StaticResource Loc}, Path=[Movies]}" Command="{Binding ShowMoviesCommand}" Style="{StaticResource MaterialDesignFlatButton}" Background="{DynamicResource PrimaryBrush}" Foreground="{DynamicResource SecondaryBrush}" Margin="5"/>
                            <Button Content="{Binding Source={StaticResource Loc}, Path=[Snacks]}" Command="{Binding ShowSnacksCommand}" Style="{StaticResource MaterialDesignFlatButton}" Background="{DynamicResource PrimaryBrush}" Foreground="{DynamicResource SecondaryBrush}" Margin="5"/>
                            <Button Content="{Binding Source={StaticResource Loc}, Path=[Drinks]}" Command="{Binding ShowDrinksCommand}" Style="{StaticResource MaterialDesignFlatButton}" Background="{DynamicResource PrimaryBrush}" Foreground="{DynamicResource SecondaryBrush}" Margin="5"/>
                        </StackPanel>

                        <Frame x:Name="CategoryFrame" NavigationUIVisibility="Hidden" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>
                    </StackPanel>
                    <materialDesign:Snackbar x:Name="SnackbarMessage" 
                                             MessageQueue="{Binding MessageQueue}"
                                             VerticalAlignment="Bottom"
                                             HorizontalAlignment="Center"
                                             Background="#fca311"
                                             Foreground="#14231d"/>
                </Grid>
            </Border>
        </Grid>
    </materialDesign:DialogHost>
</Window>
